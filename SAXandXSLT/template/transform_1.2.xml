<?xml version="1.0"?>

<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
<xsl:output omit-xml-declaration="yes"/>

    <xsl:template match="/">
      <xsl:apply-templates select="ORDER_INFO"/>
    </xsl:template>


    <xsl:template match="ORDER_INFO">
      <HTML>
        <HEAD>
          <TITLE>Customers&apos; Order information</TITLE>
        </HEAD>
        <BODY> 
          <H1>Customers&apos; Order information</H1> 
          <xsl:apply-templates select="CUSTOMER"/>
          <xsl:apply-templates select="PRICE_SUMMARY"/>
        </BODY>  
      </HTML>
    </xsl:template>


    <xsl:template match="CUSTOMER">
      <H2>Customer id:<xsl:value-of select="ID"/></H2>
      Customer group is &apos;<xsl:value-of select="@GROUP"/>&apos;<BR/><BR/>
      <BILLABLE_ORDERSs>
        <xsl:apply-templates select="SERVICE_ORDERS"/>
      </BILLABLE_ORDERSs>
    </xsl:template>

    <xsl:template match="SERVICE_ORDERS">
      Order:
      <UL>
      <xsl:apply-templates select="ORDER"/>
      </UL>
      Total: <xsl:value-of select="sum(./ORDER/PRICE)"/> euros
    </xsl:template>

    <xsl:template match="ORDER">
        <LI><xsl:value-of select="PRODUCT_ID"/> - <xsl:value-of select="PRICE"/> euros</LI>
    </xsl:template>


    <xsl:template match="PRICE_SUMMARY">
      <H1>Product sales summary</H1>
      <UL>
      <xsl:apply-templates select="PRODUCT"/>
      </UL>    
    </xsl:template>

    <xsl:template match="PRODUCT">
        <LI><xsl:value-of select="NAME"/> - net sales:<xsl:value-of select="SUM"/> euros</LI>
    </xsl:template>

</xsl:stylesheet>


